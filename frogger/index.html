<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <link href='https://fonts.googleapis.com/css?family=Anonymous+Pro:400,700' rel='stylesheet' type='text/css'>
    <title>frogger</title>
    <style>
        body {
            background-color: dimgrey;
            font-family: 'Anonymous Pro' ;
        }

        table {
            border-collapse: collapse;
            text-align: center;
            margin: 0 auto;
        }

        td {
            width: 20px;
            height: 20px;
            border: 1px;
			font-size:0px;
			color:white;
			background-size: 20px 20px;
        }
    </style>

    <script>
        var n = 20;
        var n2 = 12;
        var tab = [];
        var x = 11, y = 10;
		var car1_pos = 0,car2_pos = 5,car3_pos = 10, car4_pos = 15,car5_pos = 19,car6_pos=14,car7_pos=9,car8_pos=5,car9_pos = 0,car10_pos = 5,car11_pos=18,car12_pos=13,car13_pos=8,car14_pos=4;
		var log1_pos = 19,log2_pos= 11, log3_pos = 5, log4_pos = 0,log5_pos = 5,log6_pos=10,log7_pos=0,log0_pos=10,log8_pos=19,log9_pos=15,log10_pos=10,log11_pos=5,log12_pos=0, log13_pos=8, log14_pos=16;
		var frog_state = 1;
		var game_over = false;
		var flow=false;
		var licznik=0;
		var life=5;
		var ft = false;
		
        function init() {

            //alert("dupa");
            l = document.createElement("div");
            l.style.width="440px";
            l.style.height="40px";
            l.id="licznik";
            l.style.backgroundColor = "black";
            l.style.backgroundSize="440px 40px"
            l.style.backgroundImage = "url(gfx/h4.png)";
            l.style.margin = "0 auto";
            //l.innerHTML = life;
            document.body.appendChild(l);

            var t = document.createElement("table");
            for (var i = 0; i < n2; i++) {
                tab[i] = [];
                var tr = document.createElement("tr");
                for (var j = 0; j < n; j++) {
					tab[i][j] = 0;
					if(i<6 && i>0)
						tab[i][j]= 9;
						
					if(i==0)
						tab[i][j]= 7;

					if(i==6)
						tab[i][j]= -6;
						
                    var td = document.createElement("td");
                    td.id = "k_" + i + "_" + j;
                    tr.appendChild(td);
                }
                t.appendChild(tr);
            }
            document.body.appendChild(t);

            timer = document.createElement("div");
            timer.style.color="#B51618";
            timer.innerHTML = "TIME";
            timer.style.textAlign= "center";
            timer.style.width="440px";
            timer.style.height="50px";
            timer.style.margin="0 auto";
            timer.style.backgroundColor= "black";
			czas = document.createElement("div");
			czas.style.width="100%";
			czas.style.height="50%";
			//czas.style.position="relative";
			//czas.style.right='0px';
			//czas.style.display="block-inline";
			czas.style.backgroundColor="#B51618";
			timer.appendChild(czas);
            document.body.appendChild(timer);

            tab[x][y]= 1;
			tab[0][2]=-8;
			tab[0][6]=-8;
			tab[0][10]=-8;
			tab[0][14]=-8;
			tab[0][18]=-8;
			setInterval(makeCar1234,500);
			setInterval(makeCar5678,470);
			setInterval(makeCar910,200);
			setInterval(makeCar11121314,420);
			setInterval(makeLog123,420);
			setInterval(makeLog456,420);
			setInterval(makeLog70,300);
			setInterval(makeLog891011,420);
			setInterval(makeLog121314,320);
			setInterval(timerr,500);
			//abc = setInterval(checkLose,10);
            render();
            var btyt = document.createElement("div");
			btyt.style.width="100px";
			btyt.style.height="auto";
			btyt.style.margin="0 auto";
			btyt.style.textAlign="center";
			btyt.style.verticalAlign="middle";
			btyt.id='btyt';
			btyt.innerHTML="see how it looks on YouTube !"
			btyt.style.backgroundColor="red";
			btyt.style.color="white";
			btyt.addEventListener("click",show_yt)
			document.body.appendChild(btyt);

			var sfx_off = document.createElement("div");
			sfx_off.id= "sfx_off"
			sfx_off.innerHTML = "wylacz ten jazgot ;_;";
			sfx_off.style.position="fixed";
			sfx_off.style.left="0px";
			sfx_off.style.top="0px";
			sfx_off.style.backgroundColor="#6DB555";
			sfx_off.style.padding="10px";
			document.body.appendChild(sfx_off);
			
            audio();

        }

        function timerr()
        {
        	czas.style.width=(parseInt(czas.style.width.slice(0, -1)) - 1 )+ "%";

        	if(czas.style.width=="0%")
        	{
        		console.log("times out")
        		life--;
        		dead.play();
        		l.innerHTML= life;
        		checkLose();
        		tab[x][y]=0;
        		x = 11, y = 10;
				tab[x][y]=1;
				frog_state=1;
				render();
        		czas.style.width="100%";
        	}
        }

        function show_yt()
        {
        	document.body.removeChild(document.getElementById('btyt'))
        	document.body.innerHTML+="<div id='yt' style='width:420px;margin: 0 auto'><iframe width='420' height='315' src='https://www.youtube.com/embed/LvsctrFMU3Y?autoplay=1' frameborder='0' allowfullscreen></iframe></div>"
        }

        function audio()
        {
        	audio = new Audio('sfx/main.mp3');
        	audio.loop = true;
			audio.play();
        	move = new Audio('sfx/move.mp3');
        	dead_end = new Audio('sfx/ded2.mp3');
        	dead = new Audio('sfx/ded.mp3');
        	win = new Audio('sfx/win.mp3');
        	var io=true;
        	sfx_off.addEventListener("click", function(){

        		if(io){
        			audio.pause();
        		}
        		if(!io){
        			audio.play();
        		}
        		io=!io;
        	})
        	
        }
		
		function makeCar1234(){
			tab[n2-2][car1_pos]=2;
			tab[n2-2][car1_pos-1]=0;
			car1_pos++;
			if(car1_pos>20)
				car1_pos =0;
				
			tab[n2-2][car2_pos]=2;
			tab[n2-2][car2_pos-1]=0;
			car2_pos++;
			if(car2_pos>20)
				car2_pos =0;	
			
			tab[n2-2][car3_pos]=2;
			tab[n2-2][car3_pos-1]=0;
			car3_pos++;
			if(car3_pos>20)
				car3_pos =0;
				
			tab[n2-2][car4_pos]=2;
			tab[n2-2][car4_pos-1]=0;
			car4_pos++;
			if(car4_pos>20)
				car4_pos =0;
				
			checkLose();
			render();
		}

		function makeCar5678(){
		
			tab[n2-3][car5_pos]=3;
			tab[n2-3][car5_pos+1]=0;
			car5_pos--;
			if(car5_pos<-1)
				car5_pos =19;
				
			tab[n2-3][car6_pos]=3;
			tab[n2-3][car6_pos+1]=0;
			car6_pos--;
			if(car6_pos<-1)
				car6_pos =19;
				
			tab[n2-3][car7_pos]=3;
			tab[n2-3][car7_pos+1]=0;
			car7_pos--;
			if(car7_pos<-1)
				car7_pos =19;
				
			tab[n2-3][car8_pos]=3;
			tab[n2-3][car8_pos+1]=0;
			car8_pos--;
			if(car8_pos<-1)
				car8_pos =19;
			
			checkLose();
			render();
		}

        function makeCar910(){
			tab[n2-4][car9_pos]=4;
			tab[n2-4][car9_pos-1]=0;
			car9_pos++;
			if(car9_pos>20)
				car9_pos =0;
				
			tab[n2-4][car10_pos]=4;
			tab[n2-4][car10_pos-1]=0;
			car10_pos++;
			if(car10_pos>20)
				car10_pos =0;
			
			checkLose();
			render();
		}
		
		function makeCar11121314(){
		
			tab[n2-5][car11_pos]=5;
			tab[n2-5][car11_pos+1]=0;
			car11_pos--;
			if(car11_pos<-1)
				car11_pos =19;
				
			tab[n2-5][car12_pos]=5;
			tab[n2-5][car12_pos+1]=0;
			car12_pos--;
			if(car12_pos<-1)
				car12_pos =19;
				
			tab[n2-5][car13_pos]=5;
			tab[n2-5][car13_pos+1]=0;
			car13_pos--;
			if(car13_pos<-1)
				car13_pos =19;
				
			tab[n2-5][car14_pos]=5;
			tab[n2-5][car14_pos+1]=0;
			car14_pos--;
			if(car14_pos<-1)
				car14_pos =19;
			checkLose();
			render();
		}

		function makeLog123(){
		
			for(var i=0;i<20;i++){
				if(tab[n2-7][i]==1)
					flow=true;
					
			}
		
			tab[n2-7][log1_pos]=-1;
			tab[n2-7][log1_pos-1]=-1;
			tab[n2-7][log1_pos-2]=-1;
			tab[n2-7][log1_pos+1]=9;
			log1_pos--;
			if(log1_pos<-1)
				log1_pos =19;
				
			tab[n2-7][log2_pos]=-1;
			tab[n2-7][log2_pos-1]=-1;
			tab[n2-7][log2_pos-2]=-1;
			tab[n2-7][log2_pos+1]=9;
			log2_pos--;
			if(log2_pos<-1)
				log2_pos =19;	
			
			tab[n2-7][log3_pos]=-1;
			tab[n2-7][log3_pos-1]=-1;
			tab[n2-7][log3_pos-2]=-1;
			tab[n2-7][log3_pos+1]=9;
			log3_pos--;
			if(log3_pos<-1)
				log3_pos =19;
			if(x==(n2-7)){
				y--;
				tab[x][y]=1;
				}
			checkLose();
			//render();
		}
		
		function makeLog456(){
					tab[n2-8][log4_pos]=-2;
					tab[n2-8][log4_pos+1]=-2;
					tab[n2-8][log4_pos+2]=-2;
					tab[n2-8][log4_pos-1]=9;
					log4_pos++;
					if(log4_pos>20)
						log4_pos =0;
						
					tab[n2-8][log5_pos]=-2;
					tab[n2-8][log5_pos+1]=-2;
					tab[n2-8][log5_pos+2]=-2;
					tab[n2-8][log5_pos-1]=9;
					log5_pos++;
					if(log5_pos>20)
						log5_pos =0;	
					
					tab[n2-8][log6_pos]=-2;
					tab[n2-8][log6_pos+1]=-2;
					tab[n2-8][log6_pos+2]=-2;
					tab[n2-8][log6_pos-1]=9;
					log6_pos++;
					if(log6_pos>20)
						log6_pos =0;
					
					if(x==(n2-8)){
						y++;
						tab[x][y]=1;
						}	
					checkLose();
					//render();
				}
		function makeLog70(){
					tab[n2-9][log7_pos]=-2;
					tab[n2-9][log7_pos+1]=-2;
					tab[n2-9][log7_pos+2]=-2;
					tab[n2-9][log7_pos+3]=-2;
					tab[n2-9][log7_pos+4]=-2;
					tab[n2-9][log7_pos-1]=9;
					log7_pos++;
					if(log7_pos>20)
						log7_pos =0;

					tab[n2-9][log0_pos]=-2;
					tab[n2-9][log0_pos+1]=-2;
					tab[n2-9][log0_pos+2]=-2;
					tab[n2-9][log0_pos+3]=-2;
					tab[n2-9][log0_pos+4]=-2;
					tab[n2-9][log0_pos-1]=9;
					log0_pos++;
					if(log0_pos>20)
						log0_pos =0;

					if(x==(n2-9))
					{
						y++;
						tab[x][y]=1;
						}			
					checkLose();
					//render();
				}

		function makeLog891011(){
					tab[n2-10][log8_pos]=-1;
					tab[n2-10][log8_pos-1]=-1;
					tab[n2-10][log8_pos+1]=9;
					log8_pos--;
					if(log8_pos<-1)
						log8_pos =19;
						
					tab[n2-10][log9_pos]=-1;
					tab[n2-10][log9_pos-1]=-1;
					tab[n2-10][log9_pos+1]=9;
					log9_pos--;
					if(log9_pos<-1)
						log9_pos =19;	
					
					tab[n2-10][log10_pos]=-1;
					tab[n2-10][log10_pos-1]=-1;
					tab[n2-10][log10_pos+1]=9;
					log10_pos--;
					if(log10_pos<-1)
						log10_pos =19;

					tab[n2-10][log11_pos]=-1;
					tab[n2-10][log11_pos-1]=-1;
					tab[n2-10][log11_pos+1]=9;
					log11_pos--;
					if(log11_pos<-1)
						log11_pos =19;
					if(x==(n2-10)){
						y--;
						tab[x][y]=1;
						}				
					checkLose();
					//render();
				}
				
		function makeLog121314(){
					tab[n2-11][log12_pos]=-2;
					tab[n2-11][log12_pos+1]=-2;
					tab[n2-11][log12_pos+2]=-2;
					tab[n2-11][log12_pos-1]=9;
					log12_pos++;
					if(log12_pos>20)
						log12_pos =0;
						
					tab[n2-11][log13_pos]=-2;
					tab[n2-11][log13_pos+1]=-2;
					tab[n2-11][log13_pos+2]=-2;
					tab[n2-11][log13_pos-1]=9;
					log13_pos++;
					if(log13_pos>20)
						log13_pos =0;	
					
					tab[n2-11][log14_pos]=-2;
					tab[n2-11][log14_pos+1]=-2;
					tab[n2-11][log14_pos+2]=8;
					tab[n2-11][log14_pos-1]=9;
					log14_pos++;
					if(log14_pos>20)
						log14_pos =0;
					
					if(x==(n2-11)){
						y++;
						tab[x][y]=1;
						}
					checkLose();
					//render();
				}

		function render() {
			
            //wypisz wartosci
            for (i = 0; i < n2; i++) {
                for (j = 0; j < n; j++)
                    document.getElementById("k_" + i + "_" + j).innerHTML = tab[i][j];
            }
            //kolorki
            for (i = 0; i < n2; i++) {
                for (j = 0; j < n; j++) {
                    var xxx = document.getElementById("k_" + i + "_" + j);
                    if (tab[i][j] == 0) {
                        xxx.style.backgroundColor = "#abcdef";
                        xxx.style.backgroundImage="url(gfx/0.png)";
                    }
                    if (tab[i][j] == 1) {

                    	if(frog_state==1)
                        	xxx.style.backgroundImage="url(gfx/1.png)";
                        if(frog_state==2)
                        	xxx.style.backgroundImage="url(gfx/1-2.png)";
                        if(frog_state==3)
                        	xxx.style.backgroundImage="url(gfx/1-3.png)";
                        if(frog_state==4)
                        	xxx.style.backgroundImage="url(gfx/1-4.png)";

                        xxx.style.backgroundColor = "black";
                        //xxx.style.backgroundSize="20px 20px"
                    }
					if (tab[i][j] == 2) {
						xxx.style.backgroundImage="url(gfx/2.png)";
                        xxx.style.backgroundColor = "#ffff00";
                    }
					if (tab[i][j] == 3) {
						xxx.style.backgroundImage="url(gfx/3.png)";
                        xxx.style.backgroundColor = "#00ffff";
                    }
					if (tab[i][j] == 4) {
						xxx.style.backgroundImage="url(gfx/4.png)";
                        xxx.style.backgroundColor = "#ff00ff";
                    }
					if (tab[i][j] == 5) {
						xxx.style.backgroundImage="url(gfx/5.png)";
                        xxx.style.backgroundColor = "#ff0000";
                    }
					if (tab[i][j] == 9) {
						xxx.style.backgroundImage="url(gfx/9.png)";
                        xxx.style.backgroundColor = "#1A9AC4";
                    }
                    if (tab[i][j] == -1) {
                    	xxx.style.backgroundImage="url(gfx/-1.png)";
                        xxx.style.backgroundColor = "green";
                    }
                    if (tab[i][j] == -2) {
                    	xxx.style.backgroundImage="url(gfx/-2.png)";
                        xxx.style.backgroundColor = "#946212";
                    }
                    if (tab[i][j] == 8) {
                        xxx.style.backgroundColor = "red";
                        xxx.style.backgroundImage="url(gfx/8.png)";
                    }
					if (tab[i][j] == -8) {
                        xxx.style.backgroundColor = "gold";
                        xxx.style.backgroundImage="url(gfx/-8.png)";
                    }
					if (tab[i][j] == -7) {
                        xxx.style.backgroundColor = "#931EBA";
                        xxx.style.backgroundImage="url(gfx/-7.png)";
                    }
					if (tab[i][j] == 7) {
                        xxx.style.backgroundColor = "black";
                        xxx.style.backgroundImage="url(gfx/7.png)";
                    }
                    if (tab[i][j] == -6) {
                        xxx.style.backgroundImage="url(gfx/6.png)";
                    }
                    if (tab[i][j] == -3) {
                        xxx.style.backgroundImage="url(gfx/-3.png)";
                    }
                    if(life == 5)
                    {
                    	l.style.backgroundImage = "url(gfx/h4.png)";
                    }
                    if(life == 4)
                    {
                    	l.style.backgroundImage = "url(gfx/h3.png)";
                    }
                    if(life == 3)
                    {
                    	l.style.backgroundImage = "url(gfx/h2.png)";
                    }
                    if(life == 2)
                    {
                    	l.style.backgroundImage = "url(gfx/h1.png)";
                    }
                    if(life == 1)
                    {
                    	l.style.backgroundImage = "url(gfx/h0.png)";
                    }
                }
            }



        }
		//l = document.getElementById("licznik");
		function checkLose(){
		//console.log(life)
		l = document.getElementById("licznik");

		if(!game_over){
			if(life<1)
			{
				game_over = true;
				audio.pause();
				dead_end.play();
				alert("you lose! play again?")
				location.reload();
			}

			if(licznik>4){
				audio.pause();
				win.loop=true;
				win.play();
				game_over = true;
				alert("congtars, you won !!!");
				location.reload();
		}

			if(x<0 || x>11 || y<0 || y>19 )
			{	
				console.log("za plnasza");
				dead.play();
				life--;
				l.innerHTML= life;
				czas.style.width="100%";
				x = 11, y = 10;
				tab[x][y]=1;
			}
		
			if(tab[x][y]>1){
				//game_over = true;
				//alert("lose, try again!");
				//location.reload();
				dead.play();
				life--;
				czas.style.width="100%";
				l.innerHTML= life;
				x = 11, y = 10;
				tab[x][y]=1;
				}
			}
		}
		
        window.onkeydown = function (e) {
            //console.log(e.which)
			checkLose();
			ft=false;
			if(tab[x-1][y]===-8){
					win.play();
					czas.style.width="100%";
					console.log("win!");
					tab[x-1][y]=-7;
					x = 11, y = 10;
					tab[x][y]=1;
					licznik++;
					//break;
					ft=true;
				}

				
            if ((e.which == 87 || e.which == 38) && (!ft)) {
                //up
                move.play();
				frog_state=1;
				if(tab[x-1][y]>1)
					{	
					var d=true;
					//alert("lose, try again!");
					//location.reload();
					}
				
				tab[x][y]=0;
				 x--;
                tab[x][y]=1;

                if(d)
                {
                	tab[x][y]=0;
                	dead.play();
					life--;
					czas.style.width="100%";
					l.innerHTML= life;
					console.log("dead")
					x = 11, y = 10;
					tab[x][y]=1;
					d=false;
                }
               
            }
            if ((e.which == 83 || e.which == 40)) {
                //down
                move.play();
				frog_state=3;
				if(tab[x+1][y]>1){
				tab[x][y]=0;
				dead.play();
				life--;
				l.innerHTML= life;
				czas.style.width="100%";
				x = 10, y = 10;
				//console.log("down")
				tab[x][y]=1;
				}
				
                tab[x][y]=0;
				x++;
                tab[x][y]=1;
            }
            if ((e.which == 65 || e.which == 37)) {
                //left
                move.play();
				frog_state=4;
				if(tab[x][y-1]>1){
				tab[x][y]=0;
				dead.play();
				life--;
				czas.style.width="100%";
				l.innerHTML= life;
				x = 11, y = 11;
				tab[x][y]=1;
				}
				
                tab[x][y]=0;
				y--;
                tab[x][y]=1;

            }
            if ((e.which == 68 || e.which == 39)) {
                //right
                move.play();
				frog_state=2;
				if(tab[x][y+1]>1){
				tab[x][y]=0;
				dead.play();
				life--;
				czas.style.width="100%";
				l.innerHTML= life;
				x = 11, y = 9;
				tab[x][y]=1;
				}
				
                tab[x][y]=0;
                y++;
				tab[x][y]=1;
            }

            for(i=0;i<n;i++){
            	if(tab[6][i]!=1)
            	{
            		console.log(tab[x][y]);
            		tab[6][i]=-6;
            	}
            }

			checkLose();
            render();
        }

    </script>
</head>
<body onload="init()">
</body>
</html>